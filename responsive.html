<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<!--script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script -->

<h1>
  Responsive Table 
</h1>
<p>
Change the window width to see last columns transposing when they don't fit in its div container
</p>
<div id="parent-div" width="100%" style="background-color: tomato">
  <table id="responsive-table"  style="background-color: cyan;" border="0" width="100%" >
    <thead>
      <tr>
        <th>Column1</th>
        <th>Column2</th>
        <th>Column3</th>
        <th>Column4</th>
        <th>Column5</th>
        <th>Column6</th>
        <th>Column7</th>
        <th>Column8</th>
        <th>Column9</th>
        <th>Column10</th>
      </tr>
    </thead>
    <tbody>
      <tr class="mainRow">
        <td>Column1</td>
        <td>Column2</td>
        <td>Column3</td>
        <td>Column4</td>
        <td>Column5</td>
        <td>Column6</td>
        <td>Column7</td>
        <td>Column8</td>
        <td>Column9</td>
        <td>Column10</td>
      </tr>
      <tr style="background-color:yellow">
	      <td class="transposedColumnsCell">
          <ul>
            <li class="transposedColumn transposedColumn1">
              Column1
            </li>
            <li class="transposedColumn transposedColumn2">
              Column2
            </li>
            <li class="transposedColumn transposedColumn3">
              Column3
            </li>
            <li class="transposedColumn transposedColumn4">
              Column4
            </li>
            <li class="transposedColumn transposedColumn5">
              Column5
            </li>
            <li class="transposedColumn transposedColumn6">
              Column6
            </li>
            <li class="transposedColumn transposedColumn7">
              Column7
            </li>
            <li class="transposedColumn transposedColumn8">
              Column8
            </li>
            <li class="transposedColumn transposedColumn9">
              Column9
            </li>
            <li class="transposedColumn transposedColumn10">
              Column10
            </li>
          </ul>
        </td>
      </tr>
      <tr class="mainRow">
        <td>Column1</td>
        <td>Column2</td>
        <td>Column3</td>
        <td>Column4</td>
        <td>Column5</td>
        <td>Column6</td>
        <td>Column7</td>
        <td>Column8</td>
        <td>Column9</td>
        <td>Column10</td>
      </tr>
     <tr style="background-color:yellow">
	     <td class="transposedColumnsCell">
         <ul>
            <li class="transposedColumn transposedColumn1">
              Column1
            </li>
            <li class="transposedColumn transposedColumn2">
              Column2
            </li>
            <li class="transposedColumn transposedColumn3">
              Column3
            </li>
            <li class="transposedColumn transposedColumn4">
              Column4
            </li>
            <li class="transposedColumn transposedColumn5">
              Column5
            </li>
            <li class="transposedColumn transposedColumn6">
              Column6
            </li>
            <li class="transposedColumn transposedColumn7">
              Column7
            </li>
            <li class="transposedColumn transposedColumn8">
              Column8
            </li>
            <li class="transposedColumn transposedColumn9">
              Column9
            </li>
            <li class="transposedColumn transposedColumn10">
              Column10
            </li>
          </ul>
        </td>
      </tr>
      <tr class="mainRow">
        <td>Column1</td>
        <td>Column2</td>
        <td>Column3</td>
        <td>Column4</td>
        <td>Column5</td>
        <td>Column6</td>
        <td>Column7</td>
        <td>Column8</td>
        <td>Column9</td>
        <td>Column10</td>
      </tr>
     <tr style="background-color:yellow">
	     <td class="transposedColumnsCell">
         <ul>
            <li class="transposedColumn transposedColumn1">
              Column1
            </li>
            <li class="transposedColumn transposedColumn2">
              Column2
            </li>
            <li class="transposedColumn transposedColumn3">
              Column3
            </li>
            <li class="transposedColumn transposedColumn4">
              Column4
            </li>
            <li class="transposedColumn transposedColumn5">
              Column5
            </li>
            <li class="transposedColumn transposedColumn6">
              Column6
            </li>
            <li class="transposedColumn transposedColumn7">
              Column7
            </li>
            <li class="transposedColumn transposedColumn8">
              Column8
            </li>
            <li class="transposedColumn transposedColumn9">
              Column9
            </li>
            <li class="transposedColumn transposedColumn10">
              Column10
            </li>
          </ul>
        </td>
      </tr>
      <tr class="mainRow">
        <td>Column1</td>
        <td>Column2</td>
        <td>Column3</td>
        <td>Column4</td>
        <td>Column5</td>
        <td>Column6</td>
        <td>Column7</td>
        <td>Column8</td>
        <td>Column9</td>
        <td>Column10</td>
      </tr>
     <tr style="background-color:yellow">
	     <td class="transposedColumnsCell">
         <ul>
            <li class="transposedColumn transposedColumn1">
              Column1
            </li>
            <li class="transposedColumn transposedColumn2">
              Column2
            </li>
            <li class="transposedColumn transposedColumn3">
              Column3
            </li>
            <li class="transposedColumn transposedColumn4">
              Column4
            </li>
            <li class="transposedColumn transposedColumn5">
              Column5
            </li>
            <li class="transposedColumn transposedColumn6">
              Column6
            </li>
            <li class="transposedColumn transposedColumn7">
              Column7
            </li>
            <li class="transposedColumn transposedColumn8">
              Column8
            </li>
            <li class="transposedColumn transposedColumn9">
              Column9
            </li>
            <li class="transposedColumn transposedColumn10">
              Column10
            </li>
          </ul>
        </td>
      </tr>
      <tr class="mainRow">
        <td>Column1</td>
        <td>Column2</td>
        <td>Column3</td>
        <td>Column4</td>
        <td>Column5</td>
        <td>Column6</td>
        <td>Column7</td>
        <td>Column8</td>
        <td>Column9</td>
        <td>Column10</td>
      </tr>
     <tr style="background-color:yellow">
	     <td class="transposedColumnsCell">
         <ul>
            <li class="transposedColumn transposedColumn1">
              Column1
            </li>
            <li class="transposedColumn transposedColumn2">
              Column2
            </li>
            <li class="transposedColumn transposedColumn3">
              Column3
            </li>
            <li class="transposedColumn transposedColumn4">
              Column4
            </li>
            <li class="transposedColumn transposedColumn5">
              Column5
            </li>
            <li class="transposedColumn transposedColumn6">
              Column6
            </li>
            <li class="transposedColumn transposedColumn7">
              Column7
            </li>
            <li class="transposedColumn transposedColumn8">
              Column8
            </li>
            <li class="transposedColumn transposedColumn9">
              Column9
            </li>
            <li class="transposedColumn transposedColumn10">
              Column10
            </li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<script>

var makeTableFitInDiv = function makeTableFitInDiv(tableId, divId) {
  
  var divIdSelector = '#'+divId;
  var tableIdSelector = '#'+tableId;

  // Hide transposed columns row
  $(tableIdSelector+' .mainRow').next().hide();
  $(tableIdSelector+' .mainRow').children('td:first-child').prepend('<span class="openCloseIconsSpan openIcon"><i class="glyphicon glyphicon-plus"></i></span>')

  var addOnClickShowHideNextRow = function addOnClickShowHideNextRow() {
	$(tableIdSelector+' .mainRow').click(function() {
		$(this).children('td:first').find('span:first').remove();
		if ($(this).next().is(":visible")) {
			
			$(this).next().hide(); 
			$(this).next().removeClass('openByUser'); // We are closing
			$(this).children('td:first').prepend('<span class="openCloseIconsSpan openIcon"><i class="glyphicon glyphicon-plus"></i></span>');
		
		} else {
			
			$(this).next().show();
			$(this).next().addClass('openByUser'); // We are opening
			$(this).children('td:first').prepend('<span class="openCloseIconsSpan closeIcon"><i class="glyphicon glyphicon-minus"></i></span>');
		
		}
	})
  }
  
  var removeOnClickShowHideNextRow = function removeOnClickShowHideNextRow() {
	$(tableIdSelector+' .mainRow').off("click");
  }

  var isParentDivSmallerThanTable = function isParentDivSmallerThanTable() {
    if ($(divIdSelector).width() < $(tableIdSelector).width()) {
      return true;
    }
  }
  
  var transposeCell = function transposeCell(columnNumber) {
    
	if (columnNumber > 1 && isParentDivSmallerThanTable()) { //columnNumber > 1 (first column never transpose)
	  
	  // Hide current column
	  $(tableIdSelector+' td:nth-child('+columnNumber+'),th:nth-child('+columnNumber+')').hide();
      
	  // Show current transposed column
	  $(tableIdSelector+' .transposedColumn'+columnNumber).show();

	  // Adjust transposedColumnsCell colspan attribute
	  $(tableIdSelector+' .transposedColumnsCell').attr('colspan', columnNumber-1);
      
	  transposeCell(columnNumber-1);
	  
    } 
  }

  var performOnTable = function performOnTable() {
	
	removeOnClickShowHideNextRow();

	// Hide open/close icon if exists
	$(tableIdSelector+' .mainRow .openCloseIconsSpan').hide();

	var cells = $(tableIdSelector).children('thead,tbody').children('tr:first').children('td,th');
	
	// Reset transposedColumnsCell colspan attribute
	$(tableIdSelector+' .transposedColumnsCell').attr('colspan', cells.length);

	transposeCell(cells.length);
    
	
	if ( $(cells[cells.length-1 ]).is(":visible") ) { // Table has no column transposed
  	  
	  // Hide transposed columns row
	  $(tableIdSelector+' .mainRow').next().hide();
	  // Remove onClick event for the lines
	  removeOnClickShowHideNextRow();

	} else {
	  // Adds onClick event for the lines
	  addOnClickShowHideNextRow();
		
	  // Show open/close icon 
	  $(tableIdSelector+' .mainRow').children('td:first-child').children('span.openCloseIconsSpan').show();

	  $(tableIdSelector+' .openByUser').show();
	  //$(tableIdSelector+' .mainRow .openCloseIconsSpan .closeIcon').show();
	}

  }

  var resetColumns = function resetColumns() {
    $(tableIdSelector+' .transposedColumn').hide();
    $(tableIdSelector+' td,th').show();
  }
  resetColumns();
  performOnTable();


  // Adds a delay before performing the resizing
  var doIt;
  var resizedWidth = function resizedWidth(){
    resetColumns();
    performOnTable();
  }
  window.onresize = function() {
    clearTimeout(doIt);
    doIt = setTimeout( function() {
        resizedWidth();
    }, 300);
  };
  
}  
makeTableFitInDiv('responsive-table', 'parent-div')  
  
  
</script>
